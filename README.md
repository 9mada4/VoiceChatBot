# 🎤 VoiceChatBot

**音声だけでChatGPTを完全操作！macOS専用の音声制御ボット**

キーボード不要。話すだけでChatGPTとチャットし、自動でボタンクリック・画面操作まで完全自動化。

---

## 🎯 目的

**音声だけで完全操作** - キーボード・マウス一切不要でChatGPTを操作

- 🗣️ **話すだけで質問入力** - macOS音声入力で自然な日本語入力
- 🎤 **音声コマンドで制御** - 「はい」「終わり」などの簡単な音声コマンド
- 🖱️ **自動画面操作** - ボタン検出・クリック・スクロールを音声一つで実行
- 🔒 **完全プライベート** - 全てローカル処理、音声データは外部送信なし

---

## 🔄 動作フロー（簡易版）

### 基本の流れ
```
① 「お話しください」の音声読み上げ
② 音声入力が自動で起動 → ChatGPTへの質問を話す
③ 「音声入力終わり」と話す → 自動で送信
④ 「ChatGPTの出力が終了したら『はい』と答えてください」の音声読み上げ
⑤ 「はい」と話す → 自動で画面スクロール・ボタン検出・クリック
⑥ 読み上げが終了したら「はい」と話す → ①に戻って無限ループ
```

### 音声コマンド
| 場面 | 音声コマンド | 動作 |
|------|------|------|
| **入力終了** | 音声入力終わり / 終わり | 音声入力を停止して自動送信 |
| **画面操作確認** | はい / オッケー / うん | 画面スクロール・ボタン検出・クリック |
| **キャンセル** | いいえ / 終わり / キャンセル | 処理をキャンセル・終了 |

---

## ⚙️ セットアップ

### 📋 事前準備（重要）

#### 1. macOSシステム設定
セットアップスクリプトを実行する**前に**、以下の設定を確認してください：

```
システム設定 → キーボード → 音声入力
• 音声入力: オン
• ショートカット: 右コマンドキーを2回押す
• 拡張音声入力: オン（推奨）
```

```
システム設定 → セキュリティとプライバシー → プライバシー
• アクセシビリティ: ターミナル/VS Codeに権限付与
• 画面録画: Python/ターミナルに権限付与
```

#### 2. ChatGPTアプリ/ブラウザ準備
- ChatGPTアプリまたはWebブラウザでChatGPTにアクセス
- チャット入力欄をアクティブ状態にしておく
- **startVoiceBtn.png**ファイルを作業ディレクトリに配置（音声開始ボタンの画像）

### 🚀 自動セットアップ
```bash
git clone https://github.com/your-username/VoiceChatBot.git
cd VoiceChatBot
chmod +x setup.sh
./setup.sh
```

### 📦 setup.shに含まれるもの
- **Python依存関係のインストール** - faster-whisper, pyautogui, pyobjc-framework-Quartz
- **システムツールのインストール** - Sox（音声録音）, FFmpeg（音声処理）
- **権限設定の確認** - アクセシビリティ・画面録画権限のチェック
- **macOS音声入力設定の確認** - システム音声入力の有効化確認

---

## 📖 詳細

### システム要件
- **macOS** Ventura 13.0以降
- **Python** 3.8以上
- **Homebrew** (Sox/FFmpegのインストール用)

### 技術アーキテクチャ

#### デュアル音声システム
| システム | 用途 | 処理方式 |
|---------|------|---------|
| **macOS音声入力** | ChatGPT質問入力 | システム標準（右Cmd×2で起動） |
| **Whisper AI** | 音声コマンド認識 | ローカルAI処理（faster-whisper） |

#### 自動画面操作
- **PyAutoGUI** による画像認識・マウス制御
- **全画面ボタン検索** - 画面全体からstartVoiceBtn.pngを検索
- **複数ボタン対応** - 複数検出時は最下部ボタンを自動選択
- **座標補正** - Retina等の高解像度ディスプレイ対応

#### セキュリティ設計
- ✅ **完全ローカル処理** - 音声データの外部送信なし
- ✅ **一時ファイル自動削除** - 音声録音ファイルは即座に削除
- ✅ **最小権限** - 必要最小限のシステム権限のみ使用

### 実行方法
```bash
# 通常実行
python voice_chat_bot.py

# 音声機能テスト
python voice_chat_bot.py test

# 画面操作機能テスト
python voice_chat_bot.py scroll
```

### トラブルシューティング

| 問題 | 原因 | 解決方法 |
|------|------|---------|
| 音声入力が開始されない | アクセシビリティ権限なし | システム設定でアプリに権限付与 |
| 音声認識が動かない | Sox/FFmpegが未インストール | `brew install sox ffmpeg` |
| 送信されない | ChatGPTアプリが未起動 | ChatGPTアプリまたはブラウザを起動 |
| ボタンが見つからない | startVoiceBtn.pngが未配置 | 対象ボタンの画像を作業ディレクトリに配置 |
| 画面操作が動かない | 画面録画権限なし | システム設定でPythonに画面録画権限付与 |

---

## 📄 ライセンス

MIT License - 詳細は [LICENSE](LICENSE) ファイルを参照

---

## 🤝 コントリビューション

プルリクエスト・イシュー報告歓迎！

GitHub Issues - バグ報告・機能要望・使い方の質問など

---

## 🙏 クレジット

このプロジェクトは **GitHub Copilot Agent** との協力により開発されました。

- **コード開発**: GitHub Copilot Agentによるコード生成・最適化支援
- **ドキュメント作成**: AI支援による技術文書・README作成
- **デバッグ・改善**: 人間とAIの協働による継続的改善

AI技術を活用した効率的な開発プロセスの実例として公開しています。
